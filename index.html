<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Biblioteca Online</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      overflow-x: hidden; /* üîí evita espa√ßo lateral no mobile */
      font-family: 'Arial', sans-serif;
      background: linear-gradient(135deg, #0d0717, #1a0f2e);
      color: #fff;
    }
    header { text-align:center; padding:40px 20px; }
    header h1 { font-size:2.5rem; margin-bottom:10px; }
    header p { font-size:1.2rem; opacity:0.8; }

    /* LISTA DE LIVROS */
    .container { width:90%; max-width:1000px; margin:30px auto; }
    .library-list { display:flex; flex-direction:column; gap:20px; }
    .livro {
      display:flex;
      background: rgba(255,255,255,0.05);
      border-radius:16px;
      padding:15px;
      width:100%;
      min-height:160px;
      align-items:flex-start;
      gap:15px;
      box-shadow:0 4px 12px rgba(0,0,0,0.3);
      transition:transform 0.3s ease;
      position: relative;
    }
    .livro:hover { transform:translateY(-3px); }
    .livro img {
      width:110px;
      height:160px;
      object-fit:cover;
      border-radius:8px;
      flex-shrink:0;
    }
    .livro-info { flex:1; display:flex; flex-direction:column; justify-content:center; }
    .livro-info h2 { margin-top:0; margin-bottom:6px; font-size:1.3em; }
    .livro-info p { margin-bottom:10px; line-height:1.4; opacity:0.9; }
    .botao {
      display:inline-block;
      padding:8px 10px;
      background:#7c3aed;
      color:white;
      text-decoration:none;
      border-radius:8px;
      font-weight:bold;
      transition: background 0.3s;
    }
    .botao:hover { background:#5b21b6; }

    /* Contador individual dos livros */
    .livro-views {
      position: absolute;
      top: 10px;
      right: 10px;
      display:flex;
      align-items:center;
      gap:5px;
      font-size: 0.9rem;
    }
    .livro-views img { width:18px; height:18px; }

    /* Contador total */
    #total-visits {
      display:flex;
      align-items:center;
      justify-content:center;
      gap:8px;
      font-size:1.2rem;
      margin:15px auto;
    }
    #total-visits img { width:24px; height:24px; }

    /* Painel Hacker Admin */
    #adminPanel {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) scale(0);
      background: #0a0a1e;
      padding: 25px;
      border-radius: 15px;
      z-index: 999;
      color: #00ffcc;
      display: flex;
      flex-direction: column;
      max-height: 80vh;
      overflow-y: auto;
      width: 90%;
      max-width: 650px;
      border: 3px solid #00ffcc;
      box-shadow: 0 0 20px #00ffcc, 0 0 40px #00cc99 inset;
      font-family: 'Courier New', monospace;
      transition: transform 0.6s ease, box-shadow 0.6s ease;
      animation: glitch 2s infinite;
    }
    #adminPanel.show { transform: translate(-50%, -50%) scale(1); }
    @keyframes glitch {
      0% { box-shadow: 0 0 20px #00ffcc, 0 0 40px #00cc99 inset; }
      25% { box-shadow: 0 0 25px #00ffcc, 0 0 45px #00cc99 inset; }
      50% { box-shadow: 0 0 20px #00ffcc, 0 0 40px #00cc99 inset; }
      75% { box-shadow: 0 0 25px #00ffcc, 0 0 45px #00cc99 inset; }
      100% { box-shadow: 0 0 20px #00ffcc, 0 0 40px #00cc99 inset; }
    }
    #adminPanel h2 { text-align:center; margin-bottom:20px; text-shadow: 0 0 5px #00ffcc,0 0 15px #00cc99,0 0 25px #00ffcc; }
    #closeAdmin {
      position:absolute;
      top:10px;
      right:15px;
      background:#00ffcc;
      color:#000;
      padding:6px 12px;
      border:none;
      border-radius:5px;
      cursor:pointer;
      font-weight:bold;
      transition: all 0.3s ease;
    }
    #closeAdmin:hover { background:#00cc99; box-shadow:0 0 20px #00ffcc; }
    .admin-book {
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-bottom:14px;
      padding:12px;
      border:1px solid #00ffcc;
      border-radius:10px;
      transition: all 0.3s ease;
      background: rgba(0,255,204,0.05);
    }
    .admin-book:hover { transform: scale(1.02); box-shadow:0 0 15px #00ffcc; }
    .admin-book span { font-weight:bold; display:flex; align-items:center; gap:12px; }
    .admin-book button {
      background:#00ffcc;
      border:none;
      color:#000;
      padding:6px 10px;
      border-radius:5px;
      cursor:pointer;
      margin-left:6px;
      font-weight:bold;
      transition: all 0.3s ease;
    }
    .admin-book button:hover { background:#00cc99; box-shadow:0 0 10px #00ffcc; }
    .admin-input {
      width:60px;
      padding:4px 6px;
      border-radius:4px;
      border:1px solid #00ffcc;
      background:#0a0a1e;
      color:#00ffcc;
      text-align:center;
      font-family:'Courier New', monospace;
    }

    /* RODAP√â */
    footer { background:#1a0f2e; text-align:center; padding:25px 20px; margin-top:50px; color:#aaa; }
    footer p { margin:5px 0; }
    footer a { color:#7c3aed; text-decoration:none; margin:0 8px; }
    footer a:hover { text-decoration:underline; }

    /* Mobile ajustes */
    @media(max-width:768px){
      .livro img { width:90px; height:130px; }
      .livro-views img { width:14px; height:14px; }
      #total-visits img { width:18px; height:18px; }
    }
  </style>
</head>
<body>
  <header>
    <h1>üìö Biblioteca Online</h1>
    <p>Uma cole√ß√£o de livros digitais para quem busca crescimento pessoal, motiva√ß√£o e transforma√ß√£o.</p>
  </header>

  <div class="container">
    <!-- LISTA DE LIVROS -->
    <div class="library-list">
      <div class="livro" data-book="invisivel">
        <img src="livros/img/invisivel.png" alt="Liberte-se do inimigo invis√≠vel">
        <div class="livro-info">
          <h2>Liberte-se do inimigo invis√≠vel</h2>
          <p>Baseado em ‚ÄúMais Esperto que o Diabo‚Äù, este livro ajuda a identificar obst√°culos invis√≠veis e liberar seu potencial.</p>
          <a href="livros/Liberte-se do inimigo invis√≠vel.html" class="botao">Ver detalhes</a>
        </div>
        <div class="livro-views"><img src="https://img.icons8.com/ios-glyphs/30/ffffff/visible.png"/><span>0</span></div>
      </div>
      <div class="livro" data-book="potencial">
        <img src="livros/img/potencial.png" alt="Destravando Seu Potencial">
        <div class="livro-info">
          <h2>Destravando Seu Potencial</h2>
          <p>Um guia pr√°tico para desbloquear sua mente e alcan√ßar seus objetivos.</p>
          <a href="livros/destravando.html" class="botao">Ver detalhes</a>
        </div>
        <div class="livro-views"><img src="https://img.icons8.com/ios-glyphs/30/ffffff/visible.png"/><span>0</span></div>
      </div>
      <div class="livro" data-book="48leis">
        <img src="livros/img/48.png" alt="48 Leis do Poder">
        <div class="livro-info">
          <h2>48 Leis do Poder</h2>
          <p>Domine as regras do poder e influencie pessoas de forma estrat√©gica.</p>
          <a href="livros/48-leis-do-poder.html" class="botao">Ver detalhes</a>
        </div>
        <div class="livro-views"><img src="https://img.icons8.com/ios-glyphs/30/ffffff/visible.png"/><span>0</span></div>
      </div>
    </div>

    <!-- Contador total -->
    <div id="total-visits">
      <img src="https://img.icons8.com/ios-glyphs/30/ffffff/visible.png"/>
      <span id="totalVisits">0</span>
    </div>
  </div>

  <!-- Painel Admin -->
  <div id="adminPanel">
    <button id="closeAdmin">Fechar</button>
    <h2>üíª PAINEL HACKER</h2>
    <div id="adminBooks"></div>
    <div style="margin-top:20px; text-align:center;">
      <button id="resetTotal">Zerar total do site</button>
    </div>
  </div>

  <!-- RODAP√â -->
  <footer>
    <p>¬© 2025 Biblioteca Online</p>
    <p>
      <a href="#">Pol√≠tica de Privacidade</a> | 
      <a href="#">Termos de Uso</a> | 
      <a href="#">Instagram</a> | 
      <a href="#">Facebook</a>
    </p>
  </footer>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyClvq1ZwxUr1ACwXP0esfBbHR95U_QejWI",
      authDomain: "biblioteca-b73c3.firebaseapp.com",
      databaseURL: "https://biblioteca-b73c3-default-rtdb.firebaseio.com",
      projectId: "biblioteca-b73c3",
      storageBucket: "biblioteca-b73c3.firebasestorage.app",
      messagingSenderId: "19441912897",
      appId: "1:19441912897:web:e0a5ecde56a25657db0ac0",
      measurementId: "G-1FPNRPMM9R"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    const auth = firebase.auth();

    // CONTADOR TOTAL
    const totalVisitsEl = document.getElementById('totalVisits');
    const totalRef = db.ref('totalVisits');
    totalRef.once('value', snap => { if (!snap.val()) totalRef.set(0); });
    totalRef.on('value', snap => { animateCount(totalVisitsEl, snap.val() || 0); });
    if (!sessionStorage.getItem("visited")) { totalRef.transaction(c => (c||0)+1); sessionStorage.setItem("visited","true"); }

    // LIVROS
    const livros = document.querySelectorAll('.livro');
    livros.forEach(livro => {
      const key = livro.dataset.book;
      const ref = db.ref('books/' + key);
      const span = livro.querySelector('.livro-views span');
      ref.once('value', snap => { if (!snap.val()) ref.set(0); });
      ref.on('value', snap => { animateCount(span, snap.val()||0); });
      const link = livro.querySelector('.botao');
      const href = link.getAttribute("href");
      link.addEventListener('click', e => {
        e.preventDefault();
        ref.transaction(c => (c||0)+1, () => window.location=href);
      });
    });

    // ANIMA√á√ÉO DIGITA√á√ÉO CONTADOR
    function animateCount(el, value) {
      let current = parseInt(el.innerText)||0;
      if(current === value) return;
      const step = value>current ? 1 : -1;
      const interval = setInterval(()=>{
        current+=step;
        el.innerText=current;
        if(current===value) clearInterval(interval);
      }, 20);
    }

    // PAINEL ADMIN
    const adminPanel = document.getElementById('adminPanel');
    document.getElementById('closeAdmin').addEventListener('click',()=>adminPanel.classList.remove('show'));
    function loadAdminPanel(){
      const adminBooks = document.getElementById('adminBooks');
      adminBooks.innerHTML='';
      livros.forEach(livro=>{
        const key = livro.dataset.book;
        const ref = db.ref('books/'+key);
        const div = document.createElement('div');
        div.className='admin-book';
        div.innerHTML=`
          <span>${livro.querySelector('h2').innerText}: <span id="count-${key}">0</span></span>
          <div>
            <button id="inc-${key}">+</button>
            <button id="dec-${key}">-</button>
            <input type="number" min="0" id="set-${key}" class="admin-input" placeholder="Set">
            <button id="set-btn-${key}">‚úî</button>
            <button id="reset-${key}">Zerar</button>
          </div>`;
        adminBooks.appendChild(div);
        const countSpan = div.querySelector('#count-'+key);
        ref.on('value', snap=>animateCount(countSpan,snap.val()||0));
        div.querySelector('#inc-'+key).addEventListener('click',()=>ref.transaction(c=>(c||0)+1));
        div.querySelector('#dec-'+key).addEventListener('click',()=>ref.transaction(c=>Math.max((c||0)-1,0)));
        div.querySelector('#reset-'+key).addEventListener('click',()=>ref.set(0));
        div.querySelector('#set-btn-'+key).addEventListener('click',()=>{
          const val = parseInt(div.querySelector('#set-'+key).value);
          if(!isNaN(val)&&val>=0) ref.set(val);
        });
      });
      document.getElementById('resetTotal').onclick=()=>totalRef.set(0);
    }

    document.addEventListener('keydown', e=>{
      if(e.altKey && e.shiftKey && e.key.toLowerCase()=='a'){
        if(!auth.currentUser){
          const email=prompt('Digite seu e-mail de admin:');
          const password=prompt('Digite sua senha de admin:');
          auth.signInWithEmailAndPassword(email,password)
            .then(()=>{adminPanel.classList.add('show'); loadAdminPanel();})
            .catch(()=>alert('E-mail ou senha incorretos'));
        }else{
          adminPanel.classList.add('show'); loadAdminPanel();
        }
      }
    });
  </script>
</body>
</html>
